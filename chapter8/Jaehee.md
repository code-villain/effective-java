# item 49) 매개변수가 유효한지 검사하라

- 메서드와 생성자 대부분은 입력 매개변수의 값이 특정 조건을 만족하기를 바란다. 이런 제약은 반드시 문서화해야 되며 메서드 몸체가 시작되기 전에 검사해야 한다.   
- 오류를 발생한 즉시 잡지 못하면 해당 오류를 감지하기 어려워지고, 감지하더라도 오류의 발생 지점을 찾기 어려워진다.
- 메서드 몸체가 실행되기 전에 매개변수를 확인한다면 잘못된 값이 넘어왔을 때 즉각적이고 깔끔한 방식으로 예외를 던질 수 있다.

## 매개변수 검사를 제대로 하지 못하면 발생하는 문제
    bad: 메서드 실패 + 모호한 예외
    worse: 메서드 실행 + 잘못된 결과를 반환
    worst: 메서드 실행 + 어떤 객체를 이상한 상태로 만들어서 이후에 해당 메서드와 관련 없는 오류 발생 ^*실패 원자성을 어기는 결과^

    ** 실패 원자성: 호출된 메서드가 실패하더라도 해당 객체는 메서드 호출 전 상태를 유지한다.

- public과 protected 메서드는 매개변수 값이 잘못됐을 떄 던지는 예외를 문서화해야 한다. 그 제약을 어겼을 때 발생하는 예외도 함께 기술해야 한다. 

- 클래스 수준 주석: 해당 클래스의 모든 public 메서드에 적용된다

## Java에서 제공하는 방법 
- Java7 java.util.Objects.requireNonNull 편리하게 null 체크
```java 
String a = null;
        Objects.requireNonNull(a, "null입니다");
```
```java 
Exception in thread "main" java.lang.NullPointerException: null입니다
	at java.util.Objects.requireNonNull(Objects.java:228)
	at com.example.java.objects.objects.main(objects.java:10)
```

- Java9 Objects
    checkFromIndexSize, checkFromToIndex, checkIndex 메서드 추가

## 공개되지 않은 메서드
 - 메서드 호출 상황을 통제할 수 있으니까 유효한 값을 넘기도록 보증하고 그렇게 만들어라!      
- 단언문(assert) 사용해서 매개변수 유효성 검증

## 단언문을 사용한 매개변수 유효성 검증
- 이 단언문들은 자신이 단언한 조건이 무조건 참이라고 선언한다.
- 단언문이 일반적인 유효성 검사와 다른점
    1. 실패하면 AssertionError
    2. 런타임에 아무런 효과, 성능 저하가 없다.

- 메서드가 직접 사용하지는 않으나 나중에 쓰기 위해 저장하는 매개변수는 특히 더 신경써서 검사해야 한다. 

## 생성자
- 생성자는 "나중에 쓰려고 저장하는 매개변수의 유효성을 검사하라"는 원칙의 특수한 사례다. 생성자 매개변수의 유효성 검사는 클래스 불변식을 어기는 객체가 만들어지지 않게 하는 데 꼭 필요하다. 

## 매개변수 유효성 검사 시점(메서드 실행 전) 예외
1. 유효성 검사 비용이 지나치게 높거나 비 실용적일 때
2. 계산 과정에서 검사가 수행될 때
    Collections.sort(List) - 비교할 수 없는 객체가 들어있다면 ClassCastException 발생

- 이번 아이템을 "매개변수에 제약을 두는 게 좋다"고 해석해서는 안된다. 메서드는 최대한 범용적으로 설계해야 한다. 
